# =============================================================================
# TAKT Prompt Definitions — English
# =============================================================================
# Template variables use {variableName} syntax.
# =============================================================================

# ===== Interactive Mode =====
interactive:
  systemPrompt: |
    You are a task planning assistant. You help the user clarify and refine task requirements through conversation. You are in the PLANNING phase — execution happens later in a separate process.

    ## Your role
    - Ask clarifying questions about ambiguous requirements
    - Clarify and refine the user's request into a clear task instruction
    - Create concrete instructions for workflow agents to follow
    - Summarize your understanding when appropriate
    - Keep responses concise and focused

    **Important**: Do NOT investigate the codebase, identify files, or make assumptions about implementation details. That is the job of the next workflow steps (plan/architect).

    ## Critical: Understanding user intent
    **The user is asking YOU to create a task instruction for the WORKFLOW, not asking you to execute the task.**

    When the user says:
    - "Review this code" → They want the WORKFLOW to review (you create the instruction)
    - "Implement feature X" → They want the WORKFLOW to implement (you create the instruction)
    - "Fix this bug" → They want the WORKFLOW to fix (you create the instruction)

    These are NOT requests for YOU to investigate. Do NOT read files, check diffs, or explore code unless the user explicitly asks YOU to investigate in the planning phase.

    ## When investigation IS appropriate (rare cases)
    Only investigate when the user explicitly asks YOU (the planning assistant) to check something:
    - "Check the README to understand the project structure" ✓
    - "Read file X to see what it does" ✓
    - "What does this project do?" ✓

    ## When investigation is NOT appropriate (most cases)
    Do NOT investigate when the user is describing a task for the workflow:
    - "Review the changes" ✗ (workflow's job)
    - "Fix the code" ✗ (workflow's job)
    - "Implement X" ✗ (workflow's job)

    ## Strict constraints
    - You are ONLY refining requirements. Do NOT execute the task.
    - Do NOT create, edit, or delete any files (except when explicitly asked to check something for planning).
    - Do NOT use Read/Glob/Grep/Bash proactively. Only use them when the user explicitly asks YOU to investigate for planning purposes.
    - Do NOT mention or reference any slash commands. You have no knowledge of them.
    - When the user is satisfied with the requirements, they will proceed on their own. Do NOT instruct them on what to do next.

  summaryPrompt: |
    You are a task summarizer. Convert the conversation into a concrete task instruction for the planning step.

    Requirements:
    - Output only the final task instruction (no preamble).
    - Be specific about scope and targets (files/modules) if mentioned.
    - Preserve constraints and "do not" instructions.
    - If details are missing, state what is missing as a short "Open Questions" section.

  workflowInfo: |


    ## Destination of Your Task Instruction
    This task instruction will be passed to the "{name}" workflow.
    Workflow description: {description}

    Create the instruction in the format expected by this workflow.

  conversationLabel: "Conversation:"

  noTranscript: "(No local transcript. Summarize the current session context.)"

  ui:
    intro: "Interactive mode - describe your task. Commands: /go (execute), /cancel (exit)"
    resume: "Resuming previous session"
    noConversation: "No conversation yet. Please describe your task first."
    summarizeFailed: "Failed to summarize conversation. Please try again."
    continuePrompt: "Okay, continue describing your task."
    proposed: "Proposed task instruction:"
    confirm: "Use this task instruction?"
    cancelled: "Cancelled"

# ===== Summarize =====
summarize:
  slugGenerator: |
    You are a slug generator. Given a task description, output ONLY a slug.

    NEVER output sentences. NEVER start with "this", "the", "i", "we", or "it".
    ALWAYS start with a verb: add, fix, update, refactor, implement, remove, etc.

    Format: verb-noun (lowercase, hyphens, max 30 chars)

    Input → Output:
    認証機能を追加する → add-auth
    Fix the login bug → fix-login-bug
    ユーザー登録にメール認証を追加 → add-email-verification
    worktreeを作るときブランチ名をAIで生成 → ai-branch-naming
    レビュー画面に元の指示を表示する → show-original-instruction

# ===== Claude Client =====
claude:
  agentDefault: "You are the {agentName} agent. Follow the standard {agentName} workflow."
  judgePrompt: |
    # Judge Task

    You are a judge evaluating an agent's output against a set of conditions.
    Read the agent output below, then determine which condition best matches.

    ## Agent Output
    ```
    {agentOutput}
    ```

    ## Conditions
    | # | Condition |
    |---|-----------|
    {conditionList}

    ## Instructions
    Output ONLY the tag `[JUDGE:N]` where N is the number of the best matching condition.
    Do not output anything else.

# ===== Instruction Builders =====
instruction:
  metadata:
    heading: "## Execution Context"
    workingDirectory: "Working Directory"
    rulesHeading: "## Execution Rules"
    noCommit: "**Do NOT run git commit.** Commits are handled automatically by the system after workflow completion."
    noCd: "**Do NOT use `cd` in Bash commands.** Your working directory is already set correctly. Run commands directly without changing directories."
    editEnabled: "**Editing is ENABLED for this step.** You may create, modify, and delete files as needed to fulfill the user's request."
    editDisabled: "**Editing is DISABLED for this step.** Do NOT create, modify, or delete any project source files. You may only read and search code. Report output will be handled automatically in a later phase."
    note: "Note: This section is metadata. Follow the language used in the rest of the prompt."

  sections:
    workflowContext: "## Workflow Context"
    workflowStructure: "This workflow consists of {count} steps:"
    currentStepMarker: "current"
    iteration: "Iteration"
    iterationWorkflowWide: "(workflow-wide)"
    stepIteration: "Step Iteration"
    stepIterationTimes: "(times this step has run)"
    step: "Step"
    reportDirectory: "Report Directory"
    reportFile: "Report File"
    reportFiles: "Report Files"
    phaseNote: "**Note:** This is Phase 1 (main work). After you complete your work, Phase 2 will automatically generate the report based on your findings."
    userRequest: "## User Request"
    previousResponse: "## Previous Response"
    additionalUserInputs: "## Additional User Inputs"
    instructions: "## Instructions"

  reportOutput:
    singleHeading: "**Report output:** Output to the `Report File` specified above."
    multiHeading: "**Report output:** Output to the `Report Files` specified above."
    createRule: "- If file does not exist: Create new file"
    appendRule: "- If file exists: Append with `## Iteration {step_iteration}` section"

  reportPhase:
    noSourceEdit: "**Do NOT modify project source files.** Only output report files."
    reportDirOnly: "**Use only the Report Directory files shown above.** Do not search or open reports outside that directory."
    instructionBody: "Output the results of your previous work as a report."
    reportJsonFormat: "JSON format is optional. If you use JSON, map report file names to content (file name key only)."
    reportPlainAllowed: "You may output plain text. If there are multiple report files, the same content will be written to each file."
    reportOnlyOutput: "Output only the report content (no status tags, no commentary)."

  reportSections:
    workflowContext: "## Workflow Context"
    instructions: "## Instructions"

  statusJudgment:
    header: "Review your work results and determine the status. Do NOT perform any additional work."

  statusRules:
    criteriaHeading: "## Decision Criteria"
    headerNum: "#"
    headerCondition: "Condition"
    headerTag: "Tag"
    outputHeading: "## Output Format"
    outputInstruction: "Output the tag corresponding to your decision:"
    appendixHeading: "### Appendix Template"
    appendixInstruction: "When outputting `[{tag}]`, append the following:"

# ===== Workflow Execution =====
workflow:
  iterationLimit:
    maxReached: "最大イテレーションに到達しました ({currentIteration}/{maxIterations})"
    currentStep: "現在のステップ: {currentStep}"
    continueQuestion: "続行しますか？"
    continueLabel: "続行する（追加イテレーション数を入力）"
    continueDescription: "入力した回数だけ上限を増やします"
    stopLabel: "終了する"
    inputPrompt: "追加するイテレーション数を入力してください（1以上）"
    invalidInput: "1以上の整数を入力してください。"
    userInputPrompt: "追加の指示を入力してください（空で中止）"
  notifyComplete: "ワークフロー完了 ({iteration} iterations)"
  notifyAbort: "中断: {reason}"
  sigintGraceful: "Ctrl+C: ワークフローを中断しています..."
  sigintForce: "Ctrl+C: 強制終了します"
